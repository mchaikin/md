!function(e){"use strict";var t={duration:150,autoWidth:!1,btnText:'<i class="fa fa-caret-down"></i>',classes:{container:"selectbox",placeholderContainer:"current-value",placeholder:"placeholder",btn:"droparrow",options:"options",selected:"selected",open:"opened"}};e.fn.selectbox=function(s){var a,n=function(t){var s="",a="",n=null,l={},o=function(){a=""},c=function(){t.html()!==s&&(e.each(t.find("option"),function(){var t=e(this);t.text().length&&(l[t.text()]=t.val())}),s=t.html())},r=function(){clearTimeout(n),n=setTimeout(o,1e3)};return{find:function(s){var n,o=e(t.find("option").get(t.get(0).selectedIndex)),i=!1;return c(),r(),a+=s,n=a.length,o.length&&o.text().substr(0,n).toUpperCase()===a||n&&e.each(l,function(e,t){return e.substr(0,n).toUpperCase()===a?(i=t,!1):void 0}),i},clear:function(){clearTimeout(n),o()}}};return s=s||{},a=e.extend(!0,{},t,s),this.each(function(){var t,s,l,o,c,r,i,d=e(this),h=new n(d),u=this;d.is("select")&&(d.data("sl")===!0&&d.next("."+a.classes.container).remove(),t=d.find("option"),s=e("<div/>",{"class":a.classes.container,css:{}}),l=e("<div/>",{"class":a.classes.placeholderContainer,tabindex:0}),o=e("<div/>",{"class":a.classes.placeholder}),c=e("<div />",{"class":a.classes.btn,html:a.btnText,css:{}}),l.append(o,c),r=e("<ul/>",{"class":a.classes.options,css:{}}),t.each(function(){var t=e(this),n=e("<a/>",{href:"#",text:t.text(),css:{},click:function(e){e.preventDefault(),d.val()!==t.val()&&(null!=t.attr("data-html")?o.html(t.attr("data-html")):o.text(t.text()),r.find("a").removeClass(a.classes.selected),n.addClass(a.classes.selected),d.val(t.val()).trigger("change",[{sl:!0}])),r.slideUp(a.duration),s.removeClass(a.classes.open)}}),l=e("<li/>");l.append(n),r.append(l),null!=t.attr("data-html")&&n.html(t.attr("data-html"))}),l.on("click",function(e){e.preventDefault(),r.slideToggle(a.duration),s.toggleClass(a.classes.open),d.trigger("change")}),l.on("keydown",function(e){var s,n=e.which,l=String.fromCharCode(n),o=!1,c=u.selectedIndex;return(40===n||39===n)&&(o=!0,u.selectedIndex=Math.min(t.length-1,u.selectedIndex+1)),(38===n||37===n)&&(o=!0,u.selectedIndex=Math.max(0,u.selectedIndex-1)),o?(e.preventDefault(),c!==u.selectedIndex&&(h.clear(),d.trigger("change")),!1):((13===n||32===n)&&r.slideUp(a.duration),void(/[a-zA-Z0-9-_ !@#$%^&*\(\)+\/\\?><;:'"|]/.test(l)&&(s=h.find(l),s&&d.val()!==s&&d.val(s).trigger("change"))))}),l.on("selectstart",function(){return!1}),e(document).on("mouseup",function(e){s.has(e.target).length||(r.slideUp(a.duration),s.removeClass(a.classes.open))}),d.on("change",function(n,l){var c=this.selectedIndex,d=Math.abs(r.scrollTop()),h=e(i.get(c)),u=parseInt(r.css("border-top-width"),10),p=h.offset().top-i.first().offset().top;d>p?r.clearQueue().animate({scrollTop:u+p-s.outerHeight()},a.duration):p>d+r.height()-h.outerHeight()&&r.clearQueue().animate({scrollTop:u+p-r.height()+h.outerHeight()-s.outerHeight()},a.duration),l&&l.sl||(null==e(t.get(c)).attr("data-html")?o.text(e(t.get(c)).text()):o.html(e(t.get(c)).attr("data-html")),i.removeClass(a.classes.selected),h.addClass(a.classes.selected))}),i=r.find("a"),null==e(t.get(d[0].selectedIndex)).attr("data-html")?o.text(e(t.get(d[0].selectedIndex)).text()):o.html(e(t.get(d[0].selectedIndex)).attr("data-html")),e(i.get(d[0].selectedIndex)).addClass(a.classes.selected),a.autoWidth&&o.width(d.width()),s.append(l,r),d.hide().after(s).data("sl",!0),r.hide().css("top",s.outerHeight()),s.offset().top+r.height()+s.outerHeight()>=e(document).height()-20&&r.css({top:"auto",bottom:s.outerHeight()}))}),this}}(jQuery);
